@using CarpoolPlanner;
@using CarpoolPlanner.ViewModel;

@model LoginViewModel

@{
  ViewBag.Title = "Login";
  Layout = "~/Views/Shared/Layout.cshtml";
}
<script type="text/javascript">
  var loginCtrl = ngNetApp.controller('loginCtrl', function() {
    this.search = location.search;
  });
</script>
<h2>Login</h2>
<div class="form-horizontal" ng-controller="loginCtrl as login">
  <form method="post" name="loginForm" ng-submit="ngNet.validateForm(loginForm) && ngNet.submit('@Url.Action("Login", "User")' + login.search)" novalidate>
    <div class="form-group">
      <label class="col-md-2 control-label">@Html.PropertyCaption(m => m.UserId)</label>
      <div class="col-md-10">
        <input type="text" ng-model="ngNet.model.UserId" class="form-control" required="required" error-message="User name is required." />
      </div>
    </div>
    <div class="form-group">
      <label class="col-md-2 control-label">@Html.PropertyCaption(m => m.Password)</label>
      <div class="col-md-10">
        <input type="password" ng-model="ngNet.model.Password" class="form-control" required="required" error-message="Password is required." />
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-offset-2 col-md-10">
        <span class="checkbox">
          <label>
            <input type="checkbox" value="Login" ng-model="ngNet.model.RememberMe" />
            @Html.PropertyCaption(m => m.RememberMe)
          </label>
        </span>
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-offset-2 col-md-10">
        <input type="submit" value="Login" class="btn btn-default" />
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-offset-2 col-md-10" style="margin-top:15px;">
        @Html.ActionLink("Register as a new user", "User", "Register")
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-offset-2 col-md-10" style="margin-top:15px;">
        <!-- TODO: make a directive for this (ngInclude) -->
        <p id="message" ng-class="{ 'text-success': ngNet.model.MessageType === 1, 'text-danger': ngNet.model.MessageType === 2 }">{{ ngNet.model.Message }}</p>
      </div>
    </div>
  </form>
</div>